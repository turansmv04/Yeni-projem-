name: Scrape Cron Job (23:00 AZT)

on:
  schedule:
    # Avtomatik Ä°cra: HÉ™r gÃ¼n saat 23:00 BakÄ± vaxtÄ± (UTC 19:00-dur)
    - cron: '0 19 * * *'
  
  # ğŸ›‘ DÃœZÆLÄ°Å: Manual icra Ã¼Ã§Ã¼n dÃ¼ymÉ™ É™lavÉ™ edir
  workflow_dispatch: 

jobs:
  run_scrape:
    runs-on: ubuntu-latest
    steps:
      - name: Report UTC Time
        run: echo "Starting scrape at $(date -u) UTC"
        
      - name: Call Scrape API (Asinxron BaÅŸlanÄŸÄ±c)
        # --max-time 60: 60 saniyÉ™ Timeout verir ki, Render.com oyansÄ±n vÉ™ kod cavab versin.
        # Bu, 35 dÉ™qiqÉ™lik scraping iÅŸini arxa fonda baÅŸlatmaq Ã¼Ã§Ã¼n KRÄ°TÄ°K ÆMRDÄ°R.
        run: curl --max-time 60 https://yeni-projem-1.onrender.com/api/scrape
