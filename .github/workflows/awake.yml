name: Keep Render Awake Pings (Optimized)

on:
  workflow_dispatch:
  schedule:
    # Bakı vaxtı ilə 06:00-dan 01:59-a kimi hər 20 dəqiqədən bir işləyir (UTC saatları 02:00 - 21:59)
    # Bu, renderi oyaq saxlamaq üçün hər 20 dəqiqədə bir sorğu göndərir.
    - cron: '*/20 2-21 * * *'

jobs:
  ping_service:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Main Render URL to Keep Awake
        # Bizim Next.js-də yaratdığımız /api/keep-awake endpointi daha təmizdir
        run: |
          echo "Pinging Keep-Alive endpoint every 20 minutes..."
          # Max time 30 saniyə qoyulur
          curl --max-time 30 https://yeni-projem-1.onrender.com/api/keep-awake
